[2019-12-14 05:32:28,166] {taskinstance.py:630} INFO - Dependencies all met for <TaskInstance: http_example_aifest.save_joke 2019-12-10T12:00:00+00:00 [queued]>
[2019-12-14 05:32:28,179] {taskinstance.py:630} INFO - Dependencies all met for <TaskInstance: http_example_aifest.save_joke 2019-12-10T12:00:00+00:00 [queued]>
[2019-12-14 05:32:28,179] {taskinstance.py:841} INFO - 
--------------------------------------------------------------------------------
[2019-12-14 05:32:28,179] {taskinstance.py:842} INFO - Starting attempt 1 of 1
[2019-12-14 05:32:28,179] {taskinstance.py:843} INFO - 
--------------------------------------------------------------------------------
[2019-12-14 05:32:28,338] {taskinstance.py:862} INFO - Executing <Task(PythonOperator): save_joke> on 2019-12-10T12:00:00+00:00
[2019-12-14 05:32:28,338] {base_task_runner.py:133} INFO - Running: ['airflow', 'run', 'http_example_aifest', 'save_joke', '2019-12-10T12:00:00+00:00', '--job_id', '6', '--pool', 'default_pool', '--raw', '-sd', 'DAGS_FOLDER/http_example.py', '--cfg_path', '/tmp/tmphal1o6pb']
[2019-12-14 05:32:28,662] {base_task_runner.py:115} INFO - Job 6: Subtask save_joke /home/brow1998/miniconda3/envs/airflow_aifest2019/lib/python3.7/site-packages/airflow/configuration.py:627: DeprecationWarning: You have two airflow.cfg files: /home/brow1998/airflow/airflow.cfg and /home/brow1998/projects/aifest2019/workshop_airflow/airflow.cfg. Airflow used to look at ~/airflow/airflow.cfg, even when AIRFLOW_HOME was set to a different value. Airflow will now only read /home/brow1998/projects/aifest2019/workshop_airflow/airflow.cfg, and you should remove the other file
[2019-12-14 05:32:28,662] {base_task_runner.py:115} INFO - Job 6: Subtask save_joke   category=DeprecationWarning,
[2019-12-14 05:32:29,221] {base_task_runner.py:115} INFO - Job 6: Subtask save_joke [2019-12-14 05:32:29,220] {__init__.py:51} INFO - Using executor SequentialExecutor
[2019-12-14 05:32:29,221] {base_task_runner.py:115} INFO - Job 6: Subtask save_joke [2019-12-14 05:32:29,221] {dagbag.py:92} INFO - Filling up the DagBag from /home/brow1998/projects/aifest2019/workshop_airflow/dags/http_example.py
[2019-12-14 05:32:29,283] {base_task_runner.py:115} INFO - Job 6: Subtask save_joke [2019-12-14 05:32:29,282] {cli.py:545} INFO - Running <TaskInstance: http_example_aifest.save_joke 2019-12-10T12:00:00+00:00 [running]> on host info-note
[2019-12-14 05:32:29,302] {python_operator.py:105} INFO - Exporting the following env vars:
AIRFLOW_CTX_DAG_ID=http_example_aifest
AIRFLOW_CTX_TASK_ID=save_joke
AIRFLOW_CTX_EXECUTION_DATE=2019-12-10T12:00:00+00:00
AIRFLOW_CTX_DAG_RUN_ID=scheduled__2019-12-10T12:00:00+00:00
[2019-12-14 05:32:29,306] {taskinstance.py:1058} ERROR - 'str' object has no attribute 'json'
Traceback (most recent call last):
  File "/home/brow1998/miniconda3/envs/airflow_aifest2019/lib/python3.7/site-packages/airflow/models/taskinstance.py", line 930, in _run_raw_task
    result = task_copy.execute(context=context)
  File "/home/brow1998/miniconda3/envs/airflow_aifest2019/lib/python3.7/site-packages/airflow/operators/python_operator.py", line 113, in execute
    return_value = self.execute_callable()
  File "/home/brow1998/miniconda3/envs/airflow_aifest2019/lib/python3.7/site-packages/airflow/operators/python_operator.py", line 118, in execute_callable
    return self.python_callable(*self.op_args, **self.op_kwargs)
  File "/home/brow1998/projects/aifest2019/workshop_airflow/dags/http_example.py", line 27, in save_response
    open(f'joke_{ds}_http.json', 'w').write(json.dumps(response.json()))
AttributeError: 'str' object has no attribute 'json'
[2019-12-14 05:32:29,308] {taskinstance.py:1089} INFO - Marking task as FAILED.
[2019-12-14 05:32:29,428] {base_task_runner.py:115} INFO - Job 6: Subtask save_joke Traceback (most recent call last):
[2019-12-14 05:32:29,429] {base_task_runner.py:115} INFO - Job 6: Subtask save_joke   File "/home/brow1998/miniconda3/envs/airflow_aifest2019/bin/airflow", line 37, in <module>
[2019-12-14 05:32:29,429] {base_task_runner.py:115} INFO - Job 6: Subtask save_joke     args.func(args)
[2019-12-14 05:32:29,429] {base_task_runner.py:115} INFO - Job 6: Subtask save_joke   File "/home/brow1998/miniconda3/envs/airflow_aifest2019/lib/python3.7/site-packages/airflow/utils/cli.py", line 74, in wrapper
[2019-12-14 05:32:29,430] {base_task_runner.py:115} INFO - Job 6: Subtask save_joke     return f(*args, **kwargs)
[2019-12-14 05:32:29,430] {base_task_runner.py:115} INFO - Job 6: Subtask save_joke   File "/home/brow1998/miniconda3/envs/airflow_aifest2019/lib/python3.7/site-packages/airflow/bin/cli.py", line 551, in run
[2019-12-14 05:32:29,430] {base_task_runner.py:115} INFO - Job 6: Subtask save_joke     _run(args, dag, ti)
[2019-12-14 05:32:29,430] {base_task_runner.py:115} INFO - Job 6: Subtask save_joke   File "/home/brow1998/miniconda3/envs/airflow_aifest2019/lib/python3.7/site-packages/airflow/bin/cli.py", line 469, in _run
[2019-12-14 05:32:29,430] {base_task_runner.py:115} INFO - Job 6: Subtask save_joke     pool=args.pool,
[2019-12-14 05:32:29,430] {base_task_runner.py:115} INFO - Job 6: Subtask save_joke   File "/home/brow1998/miniconda3/envs/airflow_aifest2019/lib/python3.7/site-packages/airflow/utils/db.py", line 74, in wrapper
[2019-12-14 05:32:29,431] {base_task_runner.py:115} INFO - Job 6: Subtask save_joke     return func(*args, **kwargs)
[2019-12-14 05:32:29,431] {base_task_runner.py:115} INFO - Job 6: Subtask save_joke   File "/home/brow1998/miniconda3/envs/airflow_aifest2019/lib/python3.7/site-packages/airflow/models/taskinstance.py", line 930, in _run_raw_task
[2019-12-14 05:32:29,431] {base_task_runner.py:115} INFO - Job 6: Subtask save_joke     result = task_copy.execute(context=context)
[2019-12-14 05:32:29,431] {base_task_runner.py:115} INFO - Job 6: Subtask save_joke   File "/home/brow1998/miniconda3/envs/airflow_aifest2019/lib/python3.7/site-packages/airflow/operators/python_operator.py", line 113, in execute
[2019-12-14 05:32:29,431] {base_task_runner.py:115} INFO - Job 6: Subtask save_joke     return_value = self.execute_callable()
[2019-12-14 05:32:29,431] {base_task_runner.py:115} INFO - Job 6: Subtask save_joke   File "/home/brow1998/miniconda3/envs/airflow_aifest2019/lib/python3.7/site-packages/airflow/operators/python_operator.py", line 118, in execute_callable
[2019-12-14 05:32:29,432] {base_task_runner.py:115} INFO - Job 6: Subtask save_joke     return self.python_callable(*self.op_args, **self.op_kwargs)
[2019-12-14 05:32:29,432] {base_task_runner.py:115} INFO - Job 6: Subtask save_joke   File "/home/brow1998/projects/aifest2019/workshop_airflow/dags/http_example.py", line 27, in save_response
[2019-12-14 05:32:29,432] {base_task_runner.py:115} INFO - Job 6: Subtask save_joke     open(f'joke_{ds}_http.json', 'w').write(json.dumps(response.json()))
[2019-12-14 05:32:29,432] {base_task_runner.py:115} INFO - Job 6: Subtask save_joke AttributeError: 'str' object has no attribute 'json'
[2019-12-14 05:32:33,083] {logging_mixin.py:112} INFO - [2019-12-14 05:32:33,083] {local_task_job.py:124} WARNING - Time since last heartbeat(0.02 s) < heartrate(5.0 s), sleeping for 4.984336 s
[2019-12-14 05:32:38,072] {logging_mixin.py:112} INFO - [2019-12-14 05:32:38,071] {local_task_job.py:103} INFO - Task exited with return code 1
